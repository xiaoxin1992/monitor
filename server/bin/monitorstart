#!/bin/bash
main_path=$(dirname ${BASH_SOURCE[0]})
#main_path=$(dirname $0})
cd $main_path
server_root=$(dirname $(pwd))
case $1 in 
    start)
        python $main_path/monitor start
        if test -f $server_root/pid/monitor_server.pid;then
            echo "MONITOR SERVER START OK"
        else
            echo "MONITOR SERVER START Fail"
        fi
        sleep 0.5
        python $main_path/checkdata start
        sleep 0.1
        if test -f $server_root/pid/monitor_check_data.pid;then
            echo "MONITOR CHECK SERVER START OK" 

        else
            echo "MONITOR CHECK SERVER START fail"
        fi
        ;;
    stop)
        python $main_path/monitor stop
        if test -f $server_root/pid/monitor_server.pid;then
             echo "MONITOR SERVER START Fail" 
        else
            echo "MONITOR SERVER START OK"
        fi
        sleep 0.5
        python $main_path/checkdata stop
        if test -f $server_root/pid/monitor_check_data.pid;then
             echo "MONITOR CHECK SERVER START fail"
        else
            echo "MONITOR CHECK SERVER START OK"
        fi
        ;;
    *)
            echo "$0 [start/stop]";;
esac
